<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Select location from map</title>
    <style type="text/css">
<!--
body {
	margin-left: 0px;
	margin-top: 0px;
	margin-right: 0px;
	margin-bottom: 0px;
}
    v\:* {
      behavior:url(#default#VML);
    }
    </style>
    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAtJCjwMMQJ0UKcv8AV71t8zwUJsxTTTy4&sensor=true" type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[

    function onLoad() {
      var map = new GMap(document.getElementById("map"));
      map.addControl(new GSmallMapControl());
      map.addControl(new GMapTypeControl());
      map.centerAndZoom(new GPoint(29.0478515625, 41.07106913080641), 10);
      GEvent.addListener(map, 'click', function(overlay, point) {
        if (overlay) {
          map.removeOverlay(overlay);
        } else if (point) {
        	var gm=new GMarker(point);
        	map.addOverlay(gm);
        	var answer=confirm("Do you want to choose this point?");
			if(answer){
			window.opener.window.document.baseForm.longitude.value=point.x;
			window.opener.window.document.baseForm.latitude.value=point.y;
			window.close();
			}else{
			map.removeOverlay(gm);
			}
	        
        }
      });
    }

    //]]>
    </script>
  </head>
  <body onload="onLoad()">
    <div id="map" style="width: 500px; height: 300px"></div>
    <div id="message"></div>
  </body>
</html>
